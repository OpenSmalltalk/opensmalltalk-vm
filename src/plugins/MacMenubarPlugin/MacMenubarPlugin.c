/* Automatically generated by
	SmartSyntaxPluginCodeGenerator VMMaker.oscog-eem.2064 uuid: 732488bd-fbde-43e8-b942-4ca3e05e53a6
   from
	MacMenubarPlugin VMMaker.oscog-eem.2064 uuid: 732488bd-fbde-43e8-b942-4ca3e05e53a6
 */
static char __buildInfo[] = "MacMenubarPlugin VMMaker.oscog-eem.2064 uuid: 732488bd-fbde-43e8-b942-4ca3e05e53a6 " __DATE__ ;



#include <math.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>

/* Default EXPORT macro that does nothing (see comment in sq.h): */
#define EXPORT(returnType) returnType

/* Do not include the entire sq.h file but just those parts needed. */
#include "sqConfig.h"			/* Configuration options */
#include "sqVirtualMachine.h"	/*  The virtual machine proxy definition */
#include "sqPlatformSpecific.h"	/* Platform specific definitions */

#define true 1
#define false 0
#define null 0  /* using 'null' because nil is predefined in Think C */
#ifdef SQUEAK_BUILTIN_PLUGIN
# undef EXPORT
# define EXPORT(returnType) static returnType
#endif

#include "MacMenubarPlugin.h"
#include "sqMemoryAccess.h"


/*** Function Prototypes ***/
EXPORT(const char*) getModuleName(void);
static sqInt positiveMachineIntegerFor(usqIntptr_t value);
EXPORT(sqInt) primitiveAppendMenu(void);
EXPORT(sqInt) primitiveAppendMenuItemText(void);
EXPORT(sqInt) primitiveCheckMenuItem(void);
EXPORT(sqInt) primitiveClearMenuBar(void);
EXPORT(sqInt) primitiveCountMenuItems(void);
EXPORT(sqInt) primitiveCreateStandardWindowMenu(void);
EXPORT(sqInt) primitiveDeleteMenu(void);
EXPORT(sqInt) primitiveDeleteMenuItem(void);
EXPORT(sqInt) primitiveDisableMenuCommand(void);
EXPORT(sqInt) primitiveDisableMenuItem(void);
EXPORT(sqInt) primitiveDisableMenuItemIcon(void);
EXPORT(sqInt) primitiveDisposeMenu(void);
EXPORT(sqInt) primitiveDisposeMenuBar(void);
EXPORT(sqInt) primitiveDrawMenuBar(void);
EXPORT(sqInt) primitiveEnableMenuCommand(void);
EXPORT(sqInt) primitiveEnableMenuItem(void);
EXPORT(sqInt) primitiveEnableMenuItemIcon(void);
EXPORT(sqInt) primitiveGetIndMenuItemWithCommandID(void);
EXPORT(sqInt) primitiveGetIndMenuWithCommandID(void);
EXPORT(sqInt) primitiveGetItemCmd(void);
EXPORT(sqInt) primitiveGetItemIcon(void);
EXPORT(sqInt) primitiveGetItemMark(void);
EXPORT(sqInt) primitiveGetItemStyle(void);
EXPORT(sqInt) primitiveGetMenuBar(void);
EXPORT(sqInt) primitiveGetMenuHandle(void);
EXPORT(sqInt) primitiveGetMenuID(void);
EXPORT(sqInt) primitiveGetMenuItemCommandID(void);
EXPORT(sqInt) primitiveGetMenuItemFontID(void);
EXPORT(sqInt) primitiveGetMenuItemHierarchicalID(void);
EXPORT(sqInt) primitiveGetMenuItemKeyGlyph(void);
EXPORT(sqInt) primitiveGetMenuItemModifiers(void);
EXPORT(sqInt) primitiveGetMenuItemText(void);
EXPORT(sqInt) primitiveGetMenuItemTextEncoding(void);
EXPORT(sqInt) primitiveGetMenuTitle(void);
EXPORT(sqInt) primitiveHideMenuBar(void);
EXPORT(sqInt) primitiveHiliteMenu(void);
EXPORT(sqInt) primitiveInsertFontResMenu(void);
EXPORT(sqInt) primitiveInsertIntlResMenu(void);
EXPORT(sqInt) primitiveInsertMenu(void);
EXPORT(sqInt) primitiveInsertMenuItem(void);
EXPORT(sqInt) primitiveInvalMenuBar(void);
EXPORT(sqInt) primitiveIsMenuBarVisible(void);
EXPORT(sqInt) primitiveIsMenuItemEnabled(void);
EXPORT(sqInt) primitiveIsMenuItemIconEnabled(void);
EXPORT(sqInt) primitiveNewMenu(void);
EXPORT(sqInt) primitiveSetItemCmd(void);
EXPORT(sqInt) primitiveSetItemIcon(void);
EXPORT(sqInt) primitiveSetItemMark(void);
EXPORT(sqInt) primitiveSetItemStyle(void);
EXPORT(sqInt) primitiveSetMenuBar(void);
EXPORT(sqInt) primitiveSetMenuItemCommandID(void);
EXPORT(sqInt) primitiveSetMenuItemFontID(void);
EXPORT(sqInt) primitiveSetMenuItemHierarchicalID(void);
EXPORT(sqInt) primitiveSetMenuItemKeyGlyph(void);
EXPORT(sqInt) primitiveSetMenuItemModifiers(void);
EXPORT(sqInt) primitiveSetMenuItemText(void);
EXPORT(sqInt) primitiveSetMenuItemTextEncoding(void);
EXPORT(sqInt) primitiveSetMenuTitle(void);
EXPORT(sqInt) primitiveShowMenuBar(void);
EXPORT(sqInt) setInterpreter(struct VirtualMachine*anInterpreter);
static sqInt sqAssert(sqInt aBool);


/*** Variables ***/

#if !defined(SQUEAK_BUILTIN_PLUGIN)
static sqInt (*booleanValueOf)(sqInt obj);
static sqInt (*classString)(void);
static sqInt (*failed)(void);
static sqInt (*falseObject)(void);
static void * (*firstIndexableField)(sqInt oop);
static sqInt (*instantiateClassindexableSize)(sqInt classPointer, sqInt size);
static sqInt (*integerObjectOf)(sqInt value);
static sqInt (*isBytes)(sqInt oop);
static sqInt (*popthenPush)(sqInt nItems, sqInt oop);
static sqInt (*positive32BitIntegerFor)(unsigned int integerValue);
static usqInt (*positive32BitValueOf)(sqInt oop);
static sqInt (*positive64BitIntegerFor)(usqLong integerValue);
static usqIntptr_t (*positiveMachineIntegerValueOf)(sqInt oop);
static sqInt (*stackIntegerValue)(sqInt offset);
static sqInt (*stackValue)(sqInt offset);
static sqInt (*success)(sqInt aBoolean);
static sqInt (*trueObject)(void);
#else /* !defined(SQUEAK_BUILTIN_PLUGIN) */
extern sqInt booleanValueOf(sqInt obj);
extern sqInt classString(void);
extern sqInt failed(void);
extern sqInt falseObject(void);
extern void * firstIndexableField(sqInt oop);
extern sqInt instantiateClassindexableSize(sqInt classPointer, sqInt size);
extern sqInt integerObjectOf(sqInt value);
extern sqInt isBytes(sqInt oop);
extern sqInt popthenPush(sqInt nItems, sqInt oop);
extern sqInt positive32BitIntegerFor(unsigned int integerValue);
extern usqInt positive32BitValueOf(sqInt oop);
extern sqInt positive64BitIntegerFor(usqLong integerValue);
extern usqIntptr_t positiveMachineIntegerValueOf(sqInt oop);
extern sqInt stackIntegerValue(sqInt offset);
extern sqInt stackValue(sqInt offset);
extern sqInt success(sqInt aBoolean);
extern sqInt trueObject(void);
extern
#endif
struct VirtualMachine* interpreterProxy;
static const char *moduleName =
#ifdef SQUEAK_BUILTIN_PLUGIN
	"MacMenubarPlugin VMMaker.oscog-eem.2064 (i)"
#else
	"MacMenubarPlugin VMMaker.oscog-eem.2064 (e)"
#endif
;



/*	Note: This is hardcoded so it can be run from Squeak.
	The module name is used for validating a module *after*
	it is loaded to check if it does really contain the module
	we're thinking it contains. This is important! */

	/* InterpreterPlugin>>#getModuleName */
EXPORT(const char*)
getModuleName(void)
{
	return moduleName;
}

	/* InterpreterPlugin>>#positiveMachineIntegerFor: */
static sqInt
positiveMachineIntegerFor(usqIntptr_t value)
{
	return (BytesPerWord == 8
		? positive64BitIntegerFor(value)
		: positive32BitIntegerFor(value));
}

	/* MacMenubarPlugin>>#primitiveAppendMenu:data: */
EXPORT(sqInt)
primitiveAppendMenu(void)
{
	ConstStr255Param constStr255;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	char *str255;

	menuHandleOop = stackValue(1);
	success(isBytes(stackValue(0)));
	str255 = ((char *) (firstIndexableField(stackValue(0))));
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	constStr255 = ((ConstStr255Param) str255);
	AppendMenu(menuHandle,constStr255);
	return null;
}

	/* MacMenubarPlugin>>#primitiveAppendMenuItemText:data: */
EXPORT(sqInt)
primitiveAppendMenuItemText(void)
{
	ConstStr255Param constStr255;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	char *str255;

	menuHandleOop = stackValue(1);
	success(isBytes(stackValue(0)));
	str255 = ((char *) (firstIndexableField(stackValue(0))));
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	constStr255 = ((ConstStr255Param) str255);
	AppendMenuItemText(menuHandle,constStr255);
	return null;
}

	/* MacMenubarPlugin>>#primitiveCheckMenuItem:item:checked: */
EXPORT(sqInt)
primitiveCheckMenuItem(void)
{
	sqInt aBoolean;
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;

	menuHandleOop = stackValue(2);
	anInteger = stackIntegerValue(1);
	aBoolean = booleanValueOf(stackValue(0));
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	CheckMenuItem(menuHandle,anInteger,aBoolean);
	return null;
}

	/* MacMenubarPlugin>>#primitiveClearMenuBar */
EXPORT(sqInt)
primitiveClearMenuBar(void)
{
	ClearMenuBar();
	return null;
}

	/* MacMenubarPlugin>>#primitiveCountMenuItems: */
EXPORT(sqInt)
primitiveCountMenuItems(void)
{
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt returnValue;
	sqInt _return_value;

	menuHandleOop = stackValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	returnValue = CountMenuItems(menuHandle);
	if (failed()) {
		return null;
	}
	_return_value = integerObjectOf(returnValue);
	popthenPush(2, _return_value);
	return null;
}

	/* MacMenubarPlugin>>#primitiveCreateStandardWindowMenu: */
EXPORT(sqInt)
primitiveCreateStandardWindowMenu(void)
{
	sqInt inOptions;
	MenuHandle menuHandle;
	sqInt result;
	usqIntptr_t value;
	sqInt _return_value;

	inOptions = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	
#  if TARGET_API_MAC_CARBON
	result = CreateStandardWindowMenu(inOptions,&menuHandle);

#  endif /* TARGET_API_MAC_CARBON */

	if (failed()) {
		return null;
	}
	/* begin positiveMachineIntegerFor: */
	value = ((usqIntptr_t) menuHandle);
	_return_value = (BytesPerWord == 8
		? positive64BitIntegerFor(value)
		: positive32BitIntegerFor(value));
	if (failed()) {
		return null;
	}
	popthenPush(2, _return_value);
	return null;
}

	/* MacMenubarPlugin>>#primitiveDeleteMenu: */
EXPORT(sqInt)
primitiveDeleteMenu(void)
{
	MenuID menuID;

	menuID = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	DeleteMenu(menuID);
	return null;
}

	/* MacMenubarPlugin>>#primitiveDeleteMenuItem:item: */
EXPORT(sqInt)
primitiveDeleteMenuItem(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	DeleteMenuItem(menuHandle,anInteger);
	return null;
}

	/* MacMenubarPlugin>>#primitiveDisableMenuCommand:item: */
EXPORT(sqInt)
primitiveDisableMenuCommand(void)
{
	sqInt anInteger;
	MenuCommand commandID;
	MenuHandle menuHandle;
	sqInt menuHandleOop;

	menuHandleOop = stackValue(1);
	anInteger = stackValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	commandID = ((MenuCommand) (positive32BitValueOf(anInteger)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	
#  if TARGET_API_MAC_CARBON
	DisableMenuCommand(menuHandle,commandID);

#  endif /* TARGET_API_MAC_CARBON */

	return null;
}

	/* MacMenubarPlugin>>#primitiveDisableMenuItem:item: */
EXPORT(sqInt)
primitiveDisableMenuItem(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	DisableMenuItem(menuHandle,anInteger);
	return null;
}

	/* MacMenubarPlugin>>#primitiveDisableMenuItemIcon:item: */
EXPORT(sqInt)
primitiveDisableMenuItemIcon(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	DisableMenuItemIcon(menuHandle,anInteger);
	return null;
}

	/* MacMenubarPlugin>>#primitiveDisposeMenu: */
EXPORT(sqInt)
primitiveDisposeMenu(void)
{
	MenuHandle menuHandle;
	sqInt menuHandleOop;

	menuHandleOop = stackValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	DisposeMenu(menuHandle);
	return null;
}

	/* MacMenubarPlugin>>#primitiveDisposeMenuBar: */
EXPORT(sqInt)
primitiveDisposeMenuBar(void)
{
	Handle menuBarHandle;
	sqInt menuHandleOop;

	menuHandleOop = stackValue(0);
	if (failed()) {
		return null;
	}
	menuBarHandle = ((Handle) (positiveMachineIntegerValueOf(menuHandleOop)));
	
#  if TARGET_API_MAC_CARBON
	DisposeMenuBar(menuBarHandle);

#  else /* TARGET_API_MAC_CARBON */
	DisposeHandle(menuBarHandle);

#  endif /* TARGET_API_MAC_CARBON */

	return null;
}

	/* MacMenubarPlugin>>#primitiveDrawMenuBar */
EXPORT(sqInt)
primitiveDrawMenuBar(void)
{
	DrawMenuBar();
	return null;
}

	/* MacMenubarPlugin>>#primitiveEnableMenuCommand:item: */
EXPORT(sqInt)
primitiveEnableMenuCommand(void)
{
	sqInt anInteger;
	MenuCommand commandID;
	MenuHandle menuHandle;
	sqInt menuHandleOop;

	menuHandleOop = stackValue(1);
	anInteger = stackValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	commandID = ((MenuCommand) (positive32BitValueOf(anInteger)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	
#  if TARGET_API_MAC_CARBON
	EnableMenuCommand(menuHandle,commandID);

#  endif /* TARGET_API_MAC_CARBON */

	return null;
}

	/* MacMenubarPlugin>>#primitiveEnableMenuItem:item: */
EXPORT(sqInt)
primitiveEnableMenuItem(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	EnableMenuItem(menuHandle,anInteger);
	return null;
}

	/* MacMenubarPlugin>>#primitiveEnableMenuItemIcon:item: */
EXPORT(sqInt)
primitiveEnableMenuItemIcon(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	EnableMenuItemIcon(menuHandle,anInteger);
	return null;
}

	/* MacMenubarPlugin>>#primitiveGetIndMenuItemWithCommandID:commandID: */
EXPORT(sqInt)
primitiveGetIndMenuItemWithCommandID(void)
{
	sqInt aCommandID;
	MenuHandle applicationMenu;
	MenuCommand commandID;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	MenuItemIndex outIndex;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	aCommandID = stackValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	commandID = ((MenuCommand) (positive32BitValueOf(aCommandID)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	
#  if TARGET_API_MAC_CARBON
	GetIndMenuItemWithCommandID(menuHandle, kHICommandHide, 1,
                   &applicationMenu, &outIndex);

#  endif /* TARGET_API_MAC_CARBON */

	if (failed()) {
		return null;
	}
	_return_value = integerObjectOf(outIndex);
	popthenPush(3, _return_value);
	return null;
}

	/* MacMenubarPlugin>>#primitiveGetIndMenuWithCommandID:commandID: */
EXPORT(sqInt)
primitiveGetIndMenuWithCommandID(void)
{
	sqInt aCommandID;
	MenuHandle applicationMenu;
	MenuCommand commandID;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	MenuItemIndex outIndex;
	usqIntptr_t value;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	aCommandID = stackValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	commandID = ((MenuCommand) (positive32BitValueOf(aCommandID)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	
#  if TARGET_API_MAC_CARBON
	GetIndMenuItemWithCommandID(menuHandle, kHICommandHide, 1,
                   &applicationMenu, &outIndex);

#  endif /* TARGET_API_MAC_CARBON */

	integerObjectOf(outIndex);
	if (failed()) {
		return null;
	}
	/* begin positiveMachineIntegerFor: */
	value = ((usqIntptr_t) applicationMenu);
	_return_value = (BytesPerWord == 8
		? positive64BitIntegerFor(value)
		: positive32BitIntegerFor(value));
	if (failed()) {
		return null;
	}
	popthenPush(3, _return_value);
	return null;
}

	/* MacMenubarPlugin>>#primitiveGetItemCmd:item: */
EXPORT(sqInt)
primitiveGetItemCmd(void)
{
	CharParameter aCharacter;
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	aCharacter = 0;
	GetItemCmd(menuHandle,anInteger,&aCharacter);
	if (failed()) {
		return null;
	}
	_return_value = integerObjectOf(aCharacter);
	popthenPush(3, _return_value);
	return null;
}

	/* MacMenubarPlugin>>#primitiveGetItemIcon:item: */
EXPORT(sqInt)
primitiveGetItemIcon(void)
{
	sqInt anInteger;
	short iconIndex;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	iconIndex = 0;
	GetItemIcon(menuHandle,anInteger,&iconIndex);
	if (failed()) {
		return null;
	}
	_return_value = integerObjectOf(iconIndex);
	popthenPush(3, _return_value);
	return null;
}

	/* MacMenubarPlugin>>#primitiveGetItemMark:item: */
EXPORT(sqInt)
primitiveGetItemMark(void)
{
	CharParameter aCharacter;
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	aCharacter = 0;
	GetItemMark(menuHandle,anInteger,&aCharacter);
	if (failed()) {
		return null;
	}
	_return_value = integerObjectOf(aCharacter);
	popthenPush(3, _return_value);
	return null;
}

	/* MacMenubarPlugin>>#primitiveGetItemStyle:item: */
EXPORT(sqInt)
primitiveGetItemStyle(void)
{
	sqInt anInteger;
	Style chStyle;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	chStyle = 0;
	GetItemStyle(menuHandle,anInteger,&chStyle);
	if (failed()) {
		return null;
	}
	_return_value = integerObjectOf(chStyle);
	popthenPush(3, _return_value);
	return null;
}

	/* MacMenubarPlugin>>#primitiveGetMenuBar */
EXPORT(sqInt)
primitiveGetMenuBar(void)
{
	Handle menuHandle;
	usqIntptr_t value;
	sqInt _return_value;

	menuHandle = GetMenuBar();
	if (failed()) {
		return null;
	}
	/* begin positiveMachineIntegerFor: */
	value = ((usqIntptr_t) menuHandle);
	_return_value = (BytesPerWord == 8
		? positive64BitIntegerFor(value)
		: positive32BitIntegerFor(value));
	if (failed()) {
		return null;
	}
	popthenPush(1, _return_value);
	return null;
}

	/* MacMenubarPlugin>>#primitiveGetMenuHandle: */
EXPORT(sqInt)
primitiveGetMenuHandle(void)
{
	MenuHandle menuHandle;
	MenuID menuID;
	usqIntptr_t value;
	sqInt _return_value;

	menuID = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = GetMenuHandle(menuID);
	if (failed()) {
		return null;
	}
	/* begin positiveMachineIntegerFor: */
	value = ((usqIntptr_t) menuHandle);
	_return_value = (BytesPerWord == 8
		? positive64BitIntegerFor(value)
		: positive32BitIntegerFor(value));
	if (failed()) {
		return null;
	}
	popthenPush(2, _return_value);
	return null;
}

	/* MacMenubarPlugin>>#primitiveGetMenuID: */
EXPORT(sqInt)
primitiveGetMenuID(void)
{
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	MenuID menuID;
	sqInt _return_value;

	menuHandleOop = stackValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	menuID = GetMenuID(menuHandle);
	if (failed()) {
		return null;
	}
	_return_value = integerObjectOf(menuID);
	popthenPush(2, _return_value);
	return null;
}

	/* MacMenubarPlugin>>#primitiveGetMenuItemCommandID:item: */
EXPORT(sqInt)
primitiveGetMenuItemCommandID(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	MenuCommand outCommandID;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	outCommandID = 0;
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	GetMenuItemCommandID(menuHandle,anInteger,&outCommandID);
	if (failed()) {
		return null;
	}
	_return_value = positive32BitIntegerFor(outCommandID);
	if (failed()) {
		return null;
	}
	popthenPush(3, _return_value);
	return null;
}

	/* MacMenubarPlugin>>#primitiveGetMenuItemFontID:item: */
EXPORT(sqInt)
primitiveGetMenuItemFontID(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	SInt16 outFontID;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	outFontID = 0;
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	GetMenuItemFontID(menuHandle,anInteger,&outFontID);
	if (failed()) {
		return null;
	}
	_return_value = integerObjectOf(outFontID);
	popthenPush(3, _return_value);
	return null;
}

	/* MacMenubarPlugin>>#primitiveGetMenuItemHierarchicalID:item: */
EXPORT(sqInt)
primitiveGetMenuItemHierarchicalID(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	MenuID outHierID;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	outHierID = 0;
	GetMenuItemHierarchicalID(menuHandle,anInteger,&outHierID);
	if (failed()) {
		return null;
	}
	_return_value = integerObjectOf(outHierID);
	popthenPush(3, _return_value);
	return null;
}

	/* MacMenubarPlugin>>#primitiveGetMenuItemKeyGlyph:item: */
EXPORT(sqInt)
primitiveGetMenuItemKeyGlyph(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	SInt16 outGlyph;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	outGlyph = 0;
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	GetMenuItemKeyGlyph(menuHandle,anInteger,&outGlyph);
	if (failed()) {
		return null;
	}
	_return_value = positive32BitIntegerFor(outGlyph);
	if (failed()) {
		return null;
	}
	popthenPush(3, _return_value);
	return null;
}

	/* MacMenubarPlugin>>#primitiveGetMenuItemModifiers:item: */
EXPORT(sqInt)
primitiveGetMenuItemModifiers(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	Style outModifers;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	outModifers = 0;
	GetMenuItemModifiers(menuHandle,anInteger,&outModifers);
	if (failed()) {
		return null;
	}
	_return_value = integerObjectOf(outModifers);
	popthenPush(3, _return_value);
	return null;
}

	/* MacMenubarPlugin>>#primitiveGetMenuItemText:item: */
EXPORT(sqInt)
primitiveGetMenuItemText(void)
{
	sqInt anInteger;
	Str255 aString;
	sqInt i;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt oop;
	char *ptr;
	sqInt size;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	aString[0] = 0;
	GetMenuItemText(menuHandle,anInteger,aString);
	size = aString[0];
	oop = instantiateClassindexableSize(classString(), size);
	ptr = firstIndexableField(oop);
	for (i = 0; i < size; i += 1) {
		ptr[i] = (aString[i + 1]);
	}
	if (failed()) {
		return null;
	}
	popthenPush(3, oop);
	return null;
}

	/* MacMenubarPlugin>>#primitiveGetMenuItemTextEncoding:item: */
EXPORT(sqInt)
primitiveGetMenuItemTextEncoding(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	TextEncoding outScriptID;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	GetMenuItemTextEncoding(menuHandle,anInteger,&outScriptID);
	if (failed()) {
		return null;
	}
	_return_value = positive32BitIntegerFor(outScriptID);
	if (failed()) {
		return null;
	}
	popthenPush(3, _return_value);
	return null;
}

	/* MacMenubarPlugin>>#primitiveGetMenuTitle: */
EXPORT(sqInt)
primitiveGetMenuTitle(void)
{
	Str255 aString;
	sqInt i;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt oop;
	char *ptr;
	sqInt size;

	menuHandleOop = stackValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	aString[0] = 0;
	GetMenuTitle(menuHandle,aString);
	size = aString[0];
	oop = instantiateClassindexableSize(classString(), size);
	ptr = firstIndexableField(oop);
	for (i = 0; i < size; i += 1) {
		ptr[i] = (aString[i + 1]);
	}
	if (failed()) {
		return null;
	}
	popthenPush(2, oop);
	return null;
}

	/* MacMenubarPlugin>>#primitiveHideMenuBar */
EXPORT(sqInt)
primitiveHideMenuBar(void)
{
	HideMenuBar();
	return null;
}

	/* MacMenubarPlugin>>#primitiveHiliteMenu: */
EXPORT(sqInt)
primitiveHiliteMenu(void)
{
	MenuID menuID;

	menuID = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	HiliteMenu(menuID);
	return null;
}

	/* MacMenubarPlugin>>#primitiveInsertFontResMenu:afterItem:scriptFilter: */
EXPORT(sqInt)
primitiveInsertFontResMenu(void)
{
	sqInt afterItemInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt scriptFilterInteger;

	menuHandleOop = stackValue(2);
	afterItemInteger = stackIntegerValue(1);
	scriptFilterInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	InsertFontResMenu(menuHandle,afterItemInteger,scriptFilterInteger);
	return null;
}

	/* MacMenubarPlugin>>#primitiveInsertIntlResMenu:theType:afterItem:scriptFilter: */
EXPORT(sqInt)
primitiveInsertIntlResMenu(void)
{
	sqInt afterItemInteger;
	sqInt aResType;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	ResType resType;
	sqInt scriptFilterInteger;

	menuHandleOop = stackValue(3);
	aResType = stackIntegerValue(2);
	afterItemInteger = stackIntegerValue(1);
	scriptFilterInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	resType = ((ResType) (positive32BitValueOf(aResType)));
	InsertIntlResMenu(menuHandle,resType,afterItemInteger,scriptFilterInteger);
	return null;
}

	/* MacMenubarPlugin>>#primitiveInsertMenu:beforeID: */
EXPORT(sqInt)
primitiveInsertMenu(void)
{
	MenuID anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	InsertMenu(menuHandle,anInteger);
	return null;
}

	/* MacMenubarPlugin>>#primitiveInsertMenuItem:itemString:afterItem: */
EXPORT(sqInt)
primitiveInsertMenuItem(void)
{
	sqInt anInteger;
	ConstStr255Param constStr255;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	char *str255;

	menuHandleOop = stackValue(2);
	success(isBytes(stackValue(1)));
	str255 = ((char *) (firstIndexableField(stackValue(1))));
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	constStr255 = ((ConstStr255Param) str255);
	InsertMenuItem(menuHandle,constStr255,anInteger);
	return null;
}

	/* MacMenubarPlugin>>#primitiveInvalMenuBar */
EXPORT(sqInt)
primitiveInvalMenuBar(void)
{
	InvalMenuBar();
	return null;
}

	/* MacMenubarPlugin>>#primitiveIsMenuBarVisible */
EXPORT(sqInt)
primitiveIsMenuBarVisible(void)
{
	sqInt result;
	sqInt _return_value;

	result = IsMenuBarVisible();
	if (failed()) {
		return null;
	}
	_return_value = ((result) ? trueObject() : falseObject());
	if (failed()) {
		return null;
	}
	popthenPush(1, _return_value);
	return null;
}

	/* MacMenubarPlugin>>#primitiveIsMenuItemEnabled:item: */
EXPORT(sqInt)
primitiveIsMenuItemEnabled(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt result;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	result = IsMenuItemEnabled(menuHandle,anInteger);
	if (failed()) {
		return null;
	}
	_return_value = ((result) ? trueObject() : falseObject());
	if (failed()) {
		return null;
	}
	popthenPush(3, _return_value);
	return null;
}

	/* MacMenubarPlugin>>#primitiveIsMenuItemIconEnabled:item: */
EXPORT(sqInt)
primitiveIsMenuItemIconEnabled(void)
{
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	sqInt result;
	sqInt _return_value;

	menuHandleOop = stackValue(1);
	anInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	result = IsMenuItemIconEnabled(menuHandle,anInteger);
	if (failed()) {
		return null;
	}
	_return_value = ((result) ? trueObject() : falseObject());
	if (failed()) {
		return null;
	}
	popthenPush(3, _return_value);
	return null;
}

	/* MacMenubarPlugin>>#primitiveNewMenu:menuTitle: */
EXPORT(sqInt)
primitiveNewMenu(void)
{
	ConstStr255Param constStr255;
	MenuHandle menuHandle;
	MenuID menuID;
	char *menuTitle;
	usqIntptr_t value;
	sqInt _return_value;

	menuID = stackIntegerValue(1);
	success(isBytes(stackValue(0)));
	menuTitle = ((char *) (firstIndexableField(stackValue(0))));
	if (failed()) {
		return null;
	}
	constStr255 = ((ConstStr255Param) menuTitle);
	menuHandle = NewMenu(menuID,constStr255);
	if (failed()) {
		return null;
	}
	/* begin positiveMachineIntegerFor: */
	value = ((usqIntptr_t) menuHandle);
	_return_value = (BytesPerWord == 8
		? positive64BitIntegerFor(value)
		: positive32BitIntegerFor(value));
	if (failed()) {
		return null;
	}
	popthenPush(3, _return_value);
	return null;
}

	/* MacMenubarPlugin>>#primitiveSetItemCmd:item:cmdChar: */
EXPORT(sqInt)
primitiveSetItemCmd(void)
{
	CharParameter aCharacter;
	sqInt anInteger;
	sqInt anIntegerCmdChar;
	MenuHandle menuHandle;
	sqInt menuHandleOop;

	menuHandleOop = stackValue(2);
	anInteger = stackIntegerValue(1);
	anIntegerCmdChar = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	aCharacter = anIntegerCmdChar;
	SetItemCmd(menuHandle,anInteger,aCharacter);
	return null;
}

	/* MacMenubarPlugin>>#primitiveSetItemIcon:item:iconIndex: */
EXPORT(sqInt)
primitiveSetItemIcon(void)
{
	sqInt aIconIndexInteger;
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;

	menuHandleOop = stackValue(2);
	anInteger = stackIntegerValue(1);
	aIconIndexInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	SetItemIcon(menuHandle,anInteger,aIconIndexInteger);
	return null;
}

	/* MacMenubarPlugin>>#primitiveSetItemMark:item:markChar: */
EXPORT(sqInt)
primitiveSetItemMark(void)
{
	CharParameter aCharacter;
	sqInt aMarkChar;
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;

	menuHandleOop = stackValue(2);
	anInteger = stackIntegerValue(1);
	aMarkChar = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	aCharacter = aMarkChar;
	SetItemMark(menuHandle,anInteger,aCharacter);
	return null;
}

	/* MacMenubarPlugin>>#primitiveSetItemStyle:item:styleParameter: */
EXPORT(sqInt)
primitiveSetItemStyle(void)
{
	sqInt anInteger;
	sqInt chStyleInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;

	menuHandleOop = stackValue(2);
	anInteger = stackIntegerValue(1);
	chStyleInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	SetItemStyle(menuHandle,anInteger,chStyleInteger);
	return null;
}

	/* MacMenubarPlugin>>#primitiveSetMenuBar: */
EXPORT(sqInt)
primitiveSetMenuBar(void)
{
	MenuBarHandle menuBarHandle;
	sqInt menuHandleOop;

	menuHandleOop = stackValue(0);
	if (failed()) {
		return null;
	}
	menuBarHandle = ((MenuBarHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	SetMenuBar(menuBarHandle);
	return null;
}

	/* MacMenubarPlugin>>#primitiveSetMenuItemCommandID:item:menuCommand: */
EXPORT(sqInt)
primitiveSetMenuItemCommandID(void)
{
	sqInt anInteger;
	MenuCommand commandID;
	sqInt inCommandID;
	MenuHandle menuHandle;
	sqInt menuHandleOop;

	menuHandleOop = stackValue(2);
	anInteger = stackIntegerValue(1);
	inCommandID = stackValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	commandID = ((MenuCommand) (positive32BitValueOf(inCommandID)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	SetMenuItemCommandID(menuHandle,anInteger,commandID);
	return null;
}

	/* MacMenubarPlugin>>#primitiveSetMenuItemFontID:item:fontID: */
EXPORT(sqInt)
primitiveSetMenuItemFontID(void)
{
	sqInt aFontIDInteger;
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;

	menuHandleOop = stackValue(2);
	anInteger = stackIntegerValue(1);
	aFontIDInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	SetMenuItemFontID(menuHandle,anInteger,aFontIDInteger);
	return null;
}

	/* MacMenubarPlugin>>#primitiveSetMenuItemHierarchicalID:item:hierID: */
EXPORT(sqInt)
primitiveSetMenuItemHierarchicalID(void)
{
	MenuID aMenuID;
	sqInt anInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;

	menuHandleOop = stackValue(2);
	anInteger = stackIntegerValue(1);
	aMenuID = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	SetMenuItemHierarchicalID(menuHandle,anInteger,aMenuID);
	return null;
}

	/* MacMenubarPlugin>>#primitiveSetMenuItemKeyGlyph:item:glyph: */
EXPORT(sqInt)
primitiveSetMenuItemKeyGlyph(void)
{
	sqInt anInteger;
	sqInt inGlyphInteger;
	MenuHandle menuHandle;
	sqInt menuHandleOop;

	menuHandleOop = stackValue(2);
	anInteger = stackIntegerValue(1);
	inGlyphInteger = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	SetMenuItemKeyGlyph(menuHandle,anInteger,inGlyphInteger);
	return null;
}

	/* MacMenubarPlugin>>#primitiveSetMenuItemModifiers:item:inModifiers: */
EXPORT(sqInt)
primitiveSetMenuItemModifiers(void)
{
	sqInt anInteger;
	sqInt aUInt8;
	MenuHandle menuHandle;
	sqInt menuHandleOop;

	menuHandleOop = stackValue(2);
	anInteger = stackIntegerValue(1);
	aUInt8 = stackIntegerValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	SetMenuItemModifiers(menuHandle,anInteger,aUInt8);
	return null;
}

	/* MacMenubarPlugin>>#primitiveSetMenuItemText:item:itemString: */
EXPORT(sqInt)
primitiveSetMenuItemText(void)
{
	sqInt anInteger;
	ConstStr255Param constStr255;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	char *str255;

	menuHandleOop = stackValue(2);
	anInteger = stackIntegerValue(1);
	success(isBytes(stackValue(0)));
	str255 = ((char *) (firstIndexableField(stackValue(0))));
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	constStr255 = ((ConstStr255Param) str255);
	SetMenuItemText(menuHandle,anInteger,constStr255);
	return null;
}

	/* MacMenubarPlugin>>#primitiveSetMenuItemTextEncoding:item:inScriptID: */
EXPORT(sqInt)
primitiveSetMenuItemTextEncoding(void)
{
	sqInt anInteger;
	sqInt aTextEncodingOop;
	TextEncoding inScriptID;
	MenuHandle menuHandle;
	sqInt menuHandleOop;

	menuHandleOop = stackValue(2);
	anInteger = stackIntegerValue(1);
	aTextEncodingOop = stackValue(0);
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	inScriptID = ((TextEncoding) (positive32BitValueOf(aTextEncodingOop)));
	SetMenuItemTextEncoding(menuHandle,anInteger,inScriptID);
	return null;
}

	/* MacMenubarPlugin>>#primitiveSetMenuTitle:title: */
EXPORT(sqInt)
primitiveSetMenuTitle(void)
{
	ConstStr255Param constStr255;
	MenuHandle menuHandle;
	sqInt menuHandleOop;
	char *str255;

	menuHandleOop = stackValue(1);
	success(isBytes(stackValue(0)));
	str255 = ((char *) (firstIndexableField(stackValue(0))));
	if (failed()) {
		return null;
	}
	menuHandle = ((MenuHandle) (positiveMachineIntegerValueOf(menuHandleOop)));
	if (!(ioCheckMenuHandle(menuHandle))) {
		success(0);
		return null;
	}
	constStr255 = ((ConstStr255Param) str255);
	SetMenuTitle(menuHandle,constStr255);
	return null;
}

	/* MacMenubarPlugin>>#primitiveShowMenuBar */
EXPORT(sqInt)
primitiveShowMenuBar(void)
{
	ShowMenuBar();
	return null;
}


/*	Note: This is coded so that it can be run in Squeak. */

	/* InterpreterPlugin>>#setInterpreter: */
EXPORT(sqInt)
setInterpreter(struct VirtualMachine*anInterpreter)
{
	sqInt ok;

	interpreterProxy = anInterpreter;
	ok = ((interpreterProxy->majorVersion()) == (VM_PROXY_MAJOR))
	 && ((interpreterProxy->minorVersion()) >= (VM_PROXY_MINOR));
	if (ok) {
		
#if !defined(SQUEAK_BUILTIN_PLUGIN)
		booleanValueOf = interpreterProxy->booleanValueOf;
		classString = interpreterProxy->classString;
		failed = interpreterProxy->failed;
		falseObject = interpreterProxy->falseObject;
		firstIndexableField = interpreterProxy->firstIndexableField;
		instantiateClassindexableSize = interpreterProxy->instantiateClassindexableSize;
		integerObjectOf = interpreterProxy->integerObjectOf;
		isBytes = interpreterProxy->isBytes;
		popthenPush = interpreterProxy->popthenPush;
		positive32BitIntegerFor = interpreterProxy->positive32BitIntegerFor;
		positive32BitValueOf = interpreterProxy->positive32BitValueOf;
		positive64BitIntegerFor = interpreterProxy->positive64BitIntegerFor;
		positiveMachineIntegerValueOf = interpreterProxy->positiveMachineIntegerValueOf;
		stackIntegerValue = interpreterProxy->stackIntegerValue;
		stackValue = interpreterProxy->stackValue;
		success = interpreterProxy->success;
		trueObject = interpreterProxy->trueObject;
#endif /* !defined(SQUEAK_BUILTIN_PLUGIN) */
	}
	return ok;
}

	/* SmartSyntaxInterpreterPlugin>>#sqAssert: */
static sqInt
sqAssert(sqInt aBool)
{
	/* missing DebugCode */;
	return aBool;
}


#ifdef SQUEAK_BUILTIN_PLUGIN

static char _m[] = "MacMenubarPlugin";
void* MacMenubarPlugin_exports[][3] = {
	{(void*)_m, "getModuleName", (void*)getModuleName},
	{(void*)_m, "primitiveAppendMenu\000\000", (void*)primitiveAppendMenu},
	{(void*)_m, "primitiveAppendMenuItemText\000\000", (void*)primitiveAppendMenuItemText},
	{(void*)_m, "primitiveCheckMenuItem\000\000", (void*)primitiveCheckMenuItem},
	{(void*)_m, "primitiveClearMenuBar\000\377", (void*)primitiveClearMenuBar},
	{(void*)_m, "primitiveCountMenuItems\000\000", (void*)primitiveCountMenuItems},
	{(void*)_m, "primitiveCreateStandardWindowMenu\000\000", (void*)primitiveCreateStandardWindowMenu},
	{(void*)_m, "primitiveDeleteMenu\000\000", (void*)primitiveDeleteMenu},
	{(void*)_m, "primitiveDeleteMenuItem\000\000", (void*)primitiveDeleteMenuItem},
	{(void*)_m, "primitiveDisableMenuCommand\000\000", (void*)primitiveDisableMenuCommand},
	{(void*)_m, "primitiveDisableMenuItem\000\000", (void*)primitiveDisableMenuItem},
	{(void*)_m, "primitiveDisableMenuItemIcon\000\000", (void*)primitiveDisableMenuItemIcon},
	{(void*)_m, "primitiveDisposeMenu\000\000", (void*)primitiveDisposeMenu},
	{(void*)_m, "primitiveDisposeMenuBar\000\000", (void*)primitiveDisposeMenuBar},
	{(void*)_m, "primitiveDrawMenuBar\000\377", (void*)primitiveDrawMenuBar},
	{(void*)_m, "primitiveEnableMenuCommand\000\000", (void*)primitiveEnableMenuCommand},
	{(void*)_m, "primitiveEnableMenuItem\000\000", (void*)primitiveEnableMenuItem},
	{(void*)_m, "primitiveEnableMenuItemIcon\000\000", (void*)primitiveEnableMenuItemIcon},
	{(void*)_m, "primitiveGetIndMenuItemWithCommandID\000\000", (void*)primitiveGetIndMenuItemWithCommandID},
	{(void*)_m, "primitiveGetIndMenuWithCommandID\000\000", (void*)primitiveGetIndMenuWithCommandID},
	{(void*)_m, "primitiveGetItemCmd\000\000", (void*)primitiveGetItemCmd},
	{(void*)_m, "primitiveGetItemIcon\000\000", (void*)primitiveGetItemIcon},
	{(void*)_m, "primitiveGetItemMark\000\000", (void*)primitiveGetItemMark},
	{(void*)_m, "primitiveGetItemStyle\000\000", (void*)primitiveGetItemStyle},
	{(void*)_m, "primitiveGetMenuBar\000\377", (void*)primitiveGetMenuBar},
	{(void*)_m, "primitiveGetMenuHandle\000\000", (void*)primitiveGetMenuHandle},
	{(void*)_m, "primitiveGetMenuID\000\000", (void*)primitiveGetMenuID},
	{(void*)_m, "primitiveGetMenuItemCommandID\000\000", (void*)primitiveGetMenuItemCommandID},
	{(void*)_m, "primitiveGetMenuItemFontID\000\000", (void*)primitiveGetMenuItemFontID},
	{(void*)_m, "primitiveGetMenuItemHierarchicalID\000\000", (void*)primitiveGetMenuItemHierarchicalID},
	{(void*)_m, "primitiveGetMenuItemKeyGlyph\000\000", (void*)primitiveGetMenuItemKeyGlyph},
	{(void*)_m, "primitiveGetMenuItemModifiers\000\000", (void*)primitiveGetMenuItemModifiers},
	{(void*)_m, "primitiveGetMenuItemText\000\000", (void*)primitiveGetMenuItemText},
	{(void*)_m, "primitiveGetMenuItemTextEncoding\000\000", (void*)primitiveGetMenuItemTextEncoding},
	{(void*)_m, "primitiveGetMenuTitle\000\000", (void*)primitiveGetMenuTitle},
	{(void*)_m, "primitiveHideMenuBar\000\377", (void*)primitiveHideMenuBar},
	{(void*)_m, "primitiveHiliteMenu\000\000", (void*)primitiveHiliteMenu},
	{(void*)_m, "primitiveInsertFontResMenu\000\000", (void*)primitiveInsertFontResMenu},
	{(void*)_m, "primitiveInsertIntlResMenu\000\000", (void*)primitiveInsertIntlResMenu},
	{(void*)_m, "primitiveInsertMenu\000\000", (void*)primitiveInsertMenu},
	{(void*)_m, "primitiveInsertMenuItem\000\000", (void*)primitiveInsertMenuItem},
	{(void*)_m, "primitiveInvalMenuBar\000\377", (void*)primitiveInvalMenuBar},
	{(void*)_m, "primitiveIsMenuBarVisible\000\377", (void*)primitiveIsMenuBarVisible},
	{(void*)_m, "primitiveIsMenuItemEnabled\000\000", (void*)primitiveIsMenuItemEnabled},
	{(void*)_m, "primitiveIsMenuItemIconEnabled\000\000", (void*)primitiveIsMenuItemIconEnabled},
	{(void*)_m, "primitiveNewMenu\000\000", (void*)primitiveNewMenu},
	{(void*)_m, "primitiveSetItemCmd\000\000", (void*)primitiveSetItemCmd},
	{(void*)_m, "primitiveSetItemIcon\000\000", (void*)primitiveSetItemIcon},
	{(void*)_m, "primitiveSetItemMark\000\000", (void*)primitiveSetItemMark},
	{(void*)_m, "primitiveSetItemStyle\000\000", (void*)primitiveSetItemStyle},
	{(void*)_m, "primitiveSetMenuBar\000\000", (void*)primitiveSetMenuBar},
	{(void*)_m, "primitiveSetMenuItemCommandID\000\000", (void*)primitiveSetMenuItemCommandID},
	{(void*)_m, "primitiveSetMenuItemFontID\000\000", (void*)primitiveSetMenuItemFontID},
	{(void*)_m, "primitiveSetMenuItemHierarchicalID\000\000", (void*)primitiveSetMenuItemHierarchicalID},
	{(void*)_m, "primitiveSetMenuItemKeyGlyph\000\000", (void*)primitiveSetMenuItemKeyGlyph},
	{(void*)_m, "primitiveSetMenuItemModifiers\000\000", (void*)primitiveSetMenuItemModifiers},
	{(void*)_m, "primitiveSetMenuItemText\000\000", (void*)primitiveSetMenuItemText},
	{(void*)_m, "primitiveSetMenuItemTextEncoding\000\000", (void*)primitiveSetMenuItemTextEncoding},
	{(void*)_m, "primitiveSetMenuTitle\000\000", (void*)primitiveSetMenuTitle},
	{(void*)_m, "primitiveShowMenuBar\000\377", (void*)primitiveShowMenuBar},
	{(void*)_m, "setInterpreter", (void*)setInterpreter},
	{NULL, NULL, NULL}
};

#else /* ifdef SQ_BUILTIN_PLUGIN */

signed char primitiveAppendMenuAccessorDepth = 0;
signed char primitiveAppendMenuItemTextAccessorDepth = 0;
signed char primitiveCheckMenuItemAccessorDepth = 0;
signed char primitiveCountMenuItemsAccessorDepth = 0;
signed char primitiveCreateStandardWindowMenuAccessorDepth = 0;
signed char primitiveDeleteMenuAccessorDepth = 0;
signed char primitiveDeleteMenuItemAccessorDepth = 0;
signed char primitiveDisableMenuCommandAccessorDepth = 0;
signed char primitiveDisableMenuItemAccessorDepth = 0;
signed char primitiveDisableMenuItemIconAccessorDepth = 0;
signed char primitiveDisposeMenuAccessorDepth = 0;
signed char primitiveDisposeMenuBarAccessorDepth = 0;
signed char primitiveEnableMenuCommandAccessorDepth = 0;
signed char primitiveEnableMenuItemAccessorDepth = 0;
signed char primitiveEnableMenuItemIconAccessorDepth = 0;
signed char primitiveGetIndMenuItemWithCommandIDAccessorDepth = 0;
signed char primitiveGetIndMenuWithCommandIDAccessorDepth = 0;
signed char primitiveGetItemCmdAccessorDepth = 0;
signed char primitiveGetItemIconAccessorDepth = 0;
signed char primitiveGetItemMarkAccessorDepth = 0;
signed char primitiveGetItemStyleAccessorDepth = 0;
signed char primitiveGetMenuHandleAccessorDepth = 0;
signed char primitiveGetMenuIDAccessorDepth = 0;
signed char primitiveGetMenuItemCommandIDAccessorDepth = 0;
signed char primitiveGetMenuItemFontIDAccessorDepth = 0;
signed char primitiveGetMenuItemHierarchicalIDAccessorDepth = 0;
signed char primitiveGetMenuItemKeyGlyphAccessorDepth = 0;
signed char primitiveGetMenuItemModifiersAccessorDepth = 0;
signed char primitiveGetMenuItemTextAccessorDepth = 0;
signed char primitiveGetMenuItemTextEncodingAccessorDepth = 0;
signed char primitiveGetMenuTitleAccessorDepth = 0;
signed char primitiveHiliteMenuAccessorDepth = 0;
signed char primitiveInsertFontResMenuAccessorDepth = 0;
signed char primitiveInsertIntlResMenuAccessorDepth = 0;
signed char primitiveInsertMenuAccessorDepth = 0;
signed char primitiveInsertMenuItemAccessorDepth = 0;
signed char primitiveIsMenuItemEnabledAccessorDepth = 0;
signed char primitiveIsMenuItemIconEnabledAccessorDepth = 0;
signed char primitiveNewMenuAccessorDepth = 0;
signed char primitiveSetItemCmdAccessorDepth = 0;
signed char primitiveSetItemIconAccessorDepth = 0;
signed char primitiveSetItemMarkAccessorDepth = 0;
signed char primitiveSetItemStyleAccessorDepth = 0;
signed char primitiveSetMenuBarAccessorDepth = 0;
signed char primitiveSetMenuItemCommandIDAccessorDepth = 0;
signed char primitiveSetMenuItemFontIDAccessorDepth = 0;
signed char primitiveSetMenuItemHierarchicalIDAccessorDepth = 0;
signed char primitiveSetMenuItemKeyGlyphAccessorDepth = 0;
signed char primitiveSetMenuItemModifiersAccessorDepth = 0;
signed char primitiveSetMenuItemTextAccessorDepth = 0;
signed char primitiveSetMenuItemTextEncodingAccessorDepth = 0;
signed char primitiveSetMenuTitleAccessorDepth = 0;

#endif /* ifdef SQ_BUILTIN_PLUGIN */
