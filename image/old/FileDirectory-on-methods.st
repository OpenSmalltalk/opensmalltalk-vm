'From Squeak4.5 of 18 April 2014 [latest update: #13719] on 21 April 2014 at 3:07:52 pm'!!FileDirectory class methodsFor: 'instance creation' stamp: 'eem 4/21/2014 14:53'!on: pathString	"Return a new file directory for the given path, of the appropriate FileDirectory subclass for the current OS platform."	| pathName |	DirectoryClass ifNil: [self setDefaultDirectoryClass].	"If path ends with a delimiter (: or /) then remove it"	pathName := pathString.	(pathName at: pathName size ifAbsent: nil) = self pathNameDelimiter ifTrue:		[pathName := pathName allButLast].	DirectoryClass parentDirectoryNickname ifNotNil:		[:parentName|		(pathName beginsWith: parentName) ifTrue:			[pathName = parentName ifTrue:				[^self default containingDirectory].			 (pathName at: parentName size + 1 ifAbsent: nil) = self pathNameDelimiter ifTrue:				[^self default containingDirectory on: (pathName allButFirst: parentName size + 1)]]].	^DirectoryClass new setPathName: pathName! !!FileDirectory methodsFor: 'path access' stamp: 'eem 4/21/2014 14:57'!on: path	"Return another instance"	^ self class on: ((path at: 1 ifAbsent: nil) = self pathNameDelimiter						ifTrue: [path]						ifFalse: [pathName asString, (String with: self pathNameDelimiter), path])! !